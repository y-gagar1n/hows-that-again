{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/webpack 2","webpackCompilationHash":"27bd7ace5305702cf539","result":{"data":{"markdownRemark":{"html":"<h1>Webpack</h1>\n<h2>Пример настройки webpack для реакта:</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> init\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> -save react react-dom\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> --global webpack\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> -save-dev webpack-dev-server webpack\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> -save-dev babel-loader babel-core babel-preset-es2015 babel-preset-react</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#webpack<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>js\n\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n\tentry<span class=\"token punctuation\">:</span> <span class=\"token string\">'./index'</span><span class=\"token punctuation\">,</span> \n\toutput<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> \n\t\tpath<span class=\"token punctuation\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n\t\tfilename<span class=\"token punctuation\">:</span> <span class=\"token string\">'bundle.js'</span><span class=\"token punctuation\">,</span>\n\t\tsourceMapFilename<span class=\"token punctuation\">:</span> <span class=\"token string\">'bundle.map'</span><span class=\"token punctuation\">,</span>\n\t\tpublicPath<span class=\"token punctuation\">:</span> <span class=\"token string\">'/dist/'</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n\tdevtool<span class=\"token punctuation\">:</span> <span class=\"token string\">'#source-map'</span><span class=\"token punctuation\">,</span>\n\tmodule<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> \n\t\tloaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> \n\t\t\t<span class=\"token punctuation\">{</span> test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span> exclude<span class=\"token punctuation\">:</span> <span class=\"token regex\">/node_modules/</span><span class=\"token punctuation\">}</span> \n\t\t<span class=\"token punctuation\">]</span> \n\t<span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">#.babelrc\n\n<span class=\"token punctuation\">{</span> \n\t<span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span> \n\t\t<span class=\"token string\">\"es2015\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"react\"</span>\n\t<span class=\"token punctuation\">]</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">#index.html\n\n<span class=\"token doctype\">&lt;!doctype html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Sample App<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>root<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>./dist/bundle.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#index<span class=\"token punctuation\">.</span>js\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span> \n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span> \n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span> \n\t<span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> \n\tdocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Построение</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">webpack</code></pre></div>\n<h3>Запуск на дев-сервере</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">webpack-dev-server</code></pre></div>\n<h3>Запуск с hot module replacement</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">webpack-dev-server --inline</code></pre></div>\n<h2>Туториал:</h2>\n<p>Установка: <code class=\"language-text\">npm install webpack -g</code></p>\n<p>Создаем файл <strong>src\\index.js</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">console.log(&#39;hello!&#39;);</code></pre></div>\n<p>Запускаем для него webpack:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">webpack src\\index.js assets\\bundle.js</code></pre></div>\n<p>После этого webpack генерит <strong>bundle.js</strong> с кучей сгенерированного кода. Здесь описан наш index.js и все его зависимости:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/******/</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">modules</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// webpackBootstrap</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// The module cache</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">var</span> installedModules <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// The require function</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">moduleId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Check if module is in cache</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>installedModules<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">return</span> installedModules<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Create a new module (and put it into the cache)</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">var</span> module <span class=\"token operator\">=</span> installedModules<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> i<span class=\"token punctuation\">:</span> moduleId<span class=\"token punctuation\">,</span>\n<span class=\"token comment\">/******/</span> l<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">/******/</span> exports<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Execute the module function</span>\n<span class=\"token comment\">/******/</span> modules<span class=\"token punctuation\">[</span>moduleId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">,</span> __webpack_require__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Flag the module as loaded</span>\n<span class=\"token comment\">/******/</span> module<span class=\"token punctuation\">.</span>l <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Return the exports of the module</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">return</span> module<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// expose the modules object (__webpack_modules__)</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span>m <span class=\"token operator\">=</span> modules<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// expose the module cache</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span>c <span class=\"token operator\">=</span> installedModules<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// define getter function for harmony exports</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">d</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">exports<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> getter</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>__webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">o</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>exports<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> configurable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">/******/</span> enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">:</span> getter\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// getDefaultExport function for compatibility with non-harmony modules</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">n</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">var</span> getter <span class=\"token operator\">=</span> module <span class=\"token operator\">&amp;&amp;</span> module<span class=\"token punctuation\">.</span>__esModule <span class=\"token operator\">?</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> module<span class=\"token punctuation\">[</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">:</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getModuleExports</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> module<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span>getter<span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> getter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">return</span> getter<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Object.prototype.hasOwnProperty.call</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">o</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">object<span class=\"token punctuation\">,</span> property</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> property<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// __webpack_public_path__</span>\n<span class=\"token comment\">/******/</span> __webpack_require__<span class=\"token punctuation\">.</span>p <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token comment\">// Load entry module and return exports</span>\n<span class=\"token comment\">/******/</span> <span class=\"token keyword\">return</span> <span class=\"token function\">__webpack_require__</span><span class=\"token punctuation\">(</span>__webpack_require__<span class=\"token punctuation\">.</span>s <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/************************************************************************/</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n<span class=\"token comment\">/* 0 */</span>\n<span class=\"token comment\">/***/</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module<span class=\"token punctuation\">,</span> exports</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/***/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">/******/</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>В html после этого достаточно подключить один файл:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!doctype html></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>assets/bundle.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Теперь создадим более сложную конфигурацию билда:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">#build<span class=\"token punctuation\">.</span>js\n    \nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\tentry<span class=\"token punctuation\">:</span> <span class=\"token string\">'./index.js'</span><span class=\"token punctuation\">,</span>\n\toutput<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\tfilename<span class=\"token punctuation\">:</span> <span class=\"token string\">'assets/bundle.js'</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Запуск сборки:</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">webpack --config build.js</code></pre></div>\n<h3>Плагины</h3>\n<p>Плагины описываются в конфиге в секции plugins:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\tentry<span class=\"token punctuation\">:</span> <span class=\"token string\">'./index.js'</span><span class=\"token punctuation\">,</span>\n\toutput<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\tfilename<span class=\"token punctuation\">:</span> <span class=\"token string\">'assets/bundle.js'</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\tplugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>optimize<span class=\"token punctuation\">.</span>UglifyJsPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ПРИМЕЧАНИЕ: если при билде будет ругаться на отсутствующий модуль webpack, то надо сделать <code class=\"language-text\">npm install webpack --save-dev</code></p>\n<p>UglifyJsPlugin - Это плагин минификации, после него bundle.js выглядит так:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">!</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">function</span> <span class=\"token function\">n</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">return</span> r<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">;</span><span class=\"token keyword\">var</span> o<span class=\"token operator\">=</span>r<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">:</span>t<span class=\"token punctuation\">,</span>l<span class=\"token punctuation\">:</span><span class=\"token operator\">!</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>exports<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">return</span> e<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">,</span>o<span class=\"token punctuation\">,</span>o<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>o<span class=\"token punctuation\">.</span>l<span class=\"token operator\">=</span><span class=\"token operator\">!</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>o<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">}</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>n<span class=\"token punctuation\">.</span>m<span class=\"token operator\">=</span>e<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">.</span>c<span class=\"token operator\">=</span>r<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">d</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>n<span class=\"token punctuation\">.</span><span class=\"token function\">o</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>configurable<span class=\"token punctuation\">:</span><span class=\"token operator\">!</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>enumerable<span class=\"token punctuation\">:</span><span class=\"token operator\">!</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">:</span>t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">n</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span>e<span class=\"token operator\">&amp;&amp;</span>e<span class=\"token punctuation\">.</span>__esModule<span class=\"token operator\">?</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> e<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> e<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token keyword\">return</span> n<span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">o</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>n</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">.</span>p<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token function\">n</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>s<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span>n</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Загрузчики</h3>\n<p>Описываются в секции loaders</p>\n<p>Позволяют автоматически загружать нужные файлы (когда мы в коде загрузим их через <code class=\"language-text\">require(...)</code> или <code class=\"language-text\">import</code>.</p>\n<p>Если где-то в коде есть require/import, а соответствующий лоадер не прописан, то будет ошибка компиляции.</p>\n<p>Например, файлы json, js могут подключаться как модуль.</p>\n<p>А CSS могут автоматически встраиваться в DOM</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\tloaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span>test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.css$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span> <span class=\"token string\">'style-loader!css-loader'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.json$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span> <span class=\"token string\">'json-loader'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>test<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.hbs$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token punctuation\">:</span> <span class=\"token string\">'handlebars-loader'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\ttest<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.(eot|woff|ttf|svg|png|jpg)$/</span><span class=\"token punctuation\">,</span>\n\t\t\tloader<span class=\"token punctuation\">:</span> <span class=\"token string\">'url-loader?limit=30000&amp;name=[name]-[hash].[ext]'</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Здесь <code class=\"language-text\">test</code> означает паттерн, по которому искать, а <code class=\"language-text\">loader</code> - какой загрузчик использовать.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#src/customer.json:\n    \n    {&quot;name&quot;: &quot;Habrahabr&quot;}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"src/header.hbs:\"><pre class=\"language-src/header.hbs:\"><code class=\"language-src/header.hbs:\">    \n    &lt;h1&gt;Hello, dear {{name}}&lt;/h1&gt;\n    </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> $ <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jquery'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// загружаем данные из JSON-файла в объект:</span>\n<span class=\"token keyword\">var</span> customer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./customer.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// загружаем и компилируем шаблон:</span>\n<span class=\"token keyword\">var</span> Header <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./header.hbs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./header.css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// отдаём данные в шаблон и выводим полученный HTML</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">prepend</span><span class=\"token punctuation\">(</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span>customer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\ntest<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\.(css|scss)$/</span><span class=\"token punctuation\">,</span>\nloaders<span class=\"token punctuation\">:</span> ExtractTextPlugin<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  fallbackLoader<span class=\"token punctuation\">:</span> <span class=\"token string\">'style'</span><span class=\"token punctuation\">,</span>\n  loader<span class=\"token punctuation\">:</span> <span class=\"token string\">'css?minimize!sass!postcss'</span> <span class=\"token comment\">// \"?\" означает, что все что после, будет передано в css-loader как параметры. </span>\n                                      <span class=\"token comment\">// а \"!\" означает, что здесь применяется пайплайн справа налево и результат postcss будет передан в sass, потом в minimize</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Для загрузки css обычно используется 2 загрузчика:</p>\n<p>     - <strong>css-loader</strong> - просто загружает css, чтобы они могли использоваться как модули через import/require\n     - <strong>style-loader</strong> - встраивает стиль css в страницу</p>\n<p>Типичное применение:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n\ttest<span class=\"token punctuation\">:</span> <span class=\"token regex\">/\\\\.(css|scss)$/</span><span class=\"token punctuation\">,</span>\n\tloaders<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'style-loader'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'css-loader'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// альтернативная запись: loader:'style!css'``</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><strong>ExtractTextWebpack</strong> - плагин, позволяющий объединить все css файлы в один большой css-файл и подключать в html только его.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#loaders:\n\n\n{\ntest: /\\\\.(css|scss)$/,\nloaders: ExtractTextPlugin.extract({\nfallbackLoader: &#39;style&#39;,\nloader: &#39;css?minimize!sass!postcss&#39;\n})\n},\n\n#plugins:\n new ExtractTextPlugin(&#39;index-[contenthash].css&#39;)</code></pre></div>\n<p>Такая запись означает, что при загрузке css/scss через require, нужно попытаться прогнать его через пайплайн postcss->sass->minimize и результат записать в один общий файл index-[contenthash].css</p>\n<p>А если при обработке пайплайном произошла какая-либо ошибка, то используем обычный style-loader, который заинлайнит наш стиль прямо в html</p>\n<h3>Скрипты NPM</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  {\n      ...\n      &quot;scripts&quot;: {\n        &quot;build&quot;: &quot;webpack&quot;\n      },\n      ...\n    }</code></pre></div>\n<p>После этого можно вместо <strong>webpack</strong> писать <strong>npm run build</strong></p>\n<p>Через Webpack можно загружать:</p>\n<ol>\n<li>CSS (<a href=\"https://webpack.js.org/guides/asset-management/#loading-css\">https://webpack.js.org/guides/asset-management/#loading-css</a>), `</li>\n<li>картинки <a href=\"https://webpack.js.org/guides/asset-management/#loading-images\">https://webpack.js.org/guides/asset-management/#loading-images</a>, `</li>\n<li>шрифты <a href=\"https://webpack.js.org/guides/asset-management/#loading-fonts\">https://webpack.js.org/guides/asset-management/#loading-fonts</a></li>\n</ol>","frontmatter":{"path":"/blog/webpack 2","title":"Webpack"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}